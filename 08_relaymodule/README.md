# PIR ê¸°ë°˜ ìžë™ ì¡°ëª… ì œì–´ (ESP32 + Relay + 12V RGB LED Strip)

ESP32ì™€ PIR ì¸ì²´ ê°ì§€ ì„¼ì„œ, ë¦´ë ˆì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬  
**ì‚¬ëžŒì´ ê°ì§€ë˜ë©´ 12V RGB LED ìŠ¤íŠ¸ë¦½ì„ ìžë™ìœ¼ë¡œ ON/OFF** í•˜ëŠ” ì‹¤ìŠµ í”„ë¡œì íŠ¸ì´ë‹¤.

---

## ðŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

- **ìž…ë ¥(Input)**: PIR ì¸ì²´ ê°ì§€ ì„¼ì„œ
- **ì²˜ë¦¬(Processing)**: ESP32 (ì¡°ê±´ íŒë‹¨ ë° ì œì–´)
- **ì¶œë ¥(Output)**: ë¦´ë ˆì´ ëª¨ë“ˆì„ í†µí•œ LED ìŠ¤íŠ¸ë¦½ ì „ì› ì œì–´

> ë¦´ë ˆì´ëŠ” ESP32ì˜ ìž‘ì€ ì œì–´ ì‹ í˜¸(3.3V)ë¥¼ ì´ìš©í•´  
> ì™¸ë¶€ ì „ì›(12V)ì„ ì•ˆì „í•˜ê²Œ ìŠ¤ìœ„ì¹­í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

---

## ðŸ§° ì‚¬ìš© ë¶€í’ˆ

- ESP32 ê°œë°œ ë³´ë“œ
- PIR ì¸ì²´ ê°ì§€ ì„¼ì„œ (HC-SR501)
- 1ì±„ë„ ë¦´ë ˆì´ ëª¨ë“ˆ (5V ì½”ì¼)
- 12V RGB LED ìŠ¤íŠ¸ë¦½ (SMD 5050, +12V / R / G / B)
- 12V DC ì–´ëŒ‘í„°
- ì í¼ì„ , ë¸Œë ˆë“œë³´ë“œ

---

## ðŸ”Œ í•€ë§µ êµ¬ì„±

### 1ï¸âƒ£ PIR ì„¼ì„œ â†” ESP32

| PIR ì„¼ì„œ í•€ | ESP32 ì—°ê²° | ì„¤ëª… |
|---|---|---|
| VCC | 5V (VIN) | PIR ì „ì› |
| GND | GND | ê³µí†µ ì ‘ì§€ |
| OUT | GPIO 26 | ê°ì§€ ì‹ í˜¸ ìž…ë ¥ |

---

### 2ï¸âƒ£ ë¦´ë ˆì´ ëª¨ë“ˆ â†” ESP32 (ì œì–´ë¶€)

| ë¦´ë ˆì´ í•€ | ESP32 ì—°ê²° | ì„¤ëª… |
|---|---|---|
| VCC | 5V (VIN) | ë¦´ë ˆì´ ì½”ì¼ ì „ì› |
| GND | GND | ê³µí†µ ì ‘ì§€ |
| IN | GPIO 27 | ë¦´ë ˆì´ ON/OFF ì œì–´ |

> âš ï¸ ë¦´ë ˆì´ ëª¨ë“ˆì´ LOW íŠ¸ë¦¬ê±°ì¸ ê²½ìš°  
> â†’ IN í•€ì— LOW(0V) ì‹ í˜¸ê°€ ë“¤ì–´ê°€ë©´ ë¦´ë ˆì´ ON

---

### 3ï¸âƒ£ ë¦´ë ˆì´ ì ‘ì  â†” LED ìŠ¤íŠ¸ë¦½ (ì „ë ¥ë¶€)

LED ìŠ¤íŠ¸ë¦½ì˜ **+12V ë¼ì¸ë§Œ ë¦´ë ˆì´ë¡œ ìŠ¤ìœ„ì¹­**í•˜ì—¬  
ì „ì²´ LEDë¥¼ ON/OFF í•œë‹¤.

| ì—°ê²° ìœ„ì¹˜ | ì—°ê²° ëŒ€ìƒ | ì„¤ëª… |
|---|---|---|
| 12V ì „ì› (+) | ë¦´ë ˆì´ COM | ìŠ¤ìœ„ì¹­í•  ì „ì› |
| ë¦´ë ˆì´ NO | LED ìŠ¤íŠ¸ë¦½ +12V | ë¦´ë ˆì´ ON ì‹œ ì „ì› ê³µê¸‰ |
| 12V ì „ì› (â€“) | LED ìŠ¤íŠ¸ë¦½ R/G/B | RGB ì±„ë„ ê³µí†µ ìŒê·¹ |

> RGB ìŠ¤íŠ¸ë¦½ì€ **+12V ê³µí†µ + R/G/B ë§ˆì´ë„ˆìŠ¤ ì œì–´ ë°©ì‹**ì´ë‹¤.

---

## ðŸ’¡ ë™ìž‘ ì›ë¦¬

1. PIR ì„¼ì„œê°€ ì‚¬ëžŒì˜ ì›€ì§ìž„ì„ ê°ì§€
2. ESP32ê°€ PIR OUT ì‹ í˜¸ë¥¼ ì½ìŒ
3. ê°ì§€ ì‹œ ë¦´ë ˆì´ IN ì‹ í˜¸ ì¶œë ¥
4. ë¦´ë ˆì´ COMâ€“NO ì ‘ì  ì—°ê²°
5. 12V ì „ì›ì´ LED ìŠ¤íŠ¸ë¦½ì— ê³µê¸‰ â†’ LED ON
6. ì¼ì • ì‹œê°„ í›„ ë¦´ë ˆì´ OFF â†’ LED OFF

---

## ðŸ§  ESP32 ì˜ˆì œ ì½”ë“œ

```cpp
const int PIR_PIN = 26;
const int RELAY_PIN = 27;

// ë¦´ë ˆì´ê°€ LOW íŠ¸ë¦¬ê±°ì¸ ê²½ìš°
const int RELAY_ON = LOW;
const int RELAY_OFF = HIGH;

unsigned long holdTime = 5000;  // LED ìœ ì§€ ì‹œê°„(ms)
unsigned long lastDetect = 0;

void setup() {
  pinMode(PIR_PIN, INPUT);
  pinMode(RELAY_PIN, OUTPUT);
  digitalWrite(RELAY_PIN, RELAY_OFF);
  Serial.begin(115200);
}

void loop() {
  if (digitalRead(PIR_PIN) == HIGH) {
    lastDetect = millis();
    digitalWrite(RELAY_PIN, RELAY_ON);
    Serial.println("Motion detected â†’ LED ON");
  }

  if (millis() - lastDetect > holdTime) {
    digitalWrite(RELAY_PIN, RELAY_OFF);
  }

  delay(50);
}
